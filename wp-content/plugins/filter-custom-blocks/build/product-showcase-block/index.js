(()=>{"use strict";var e,t={391:(e,t,a)=>{const c=window.wp.blocks,l=window.wp.i18n,o=window.wp.blockEditor,r=window.wp.components,n=window.wp.element,s=window.wp.apiFetch;var m=a.n(s);const i=JSON.parse('{"UU":"block-development-examples/product-showcase-block"}');(0,c.registerBlockType)(i.UU,{edit:function({attributes:e,setAttributes:t}){const{heading:a,subheading:c,products:s,productIds:i,numberOfProducts:d,displayMode:p,cardBackgroundColor:u,textColor:g,buttonColor:v,buttonTextColor:b,borderRadius:h,spacing:R}=e,[E,_]=(0,n.useState)(null),[k,C]=(0,n.useState)([]),[x,y]=(0,n.useState)(!1),[N,w]=(0,n.useState)(""),[f,S]=(0,n.useState)([]),[P,B]=(0,n.useState)(!1),[$,T]=(0,n.useState)([]);(0,n.useEffect)((()=>{"woo"===p&&(i.length>0?I():U())}),[p]),(0,n.useEffect)((()=>{if(i.length>0&&"woo"===p){const e=i.map((e=>{const t=s.find((t=>t.id===e));return{id:e,name:t?t.title:`Product ${e}`,selected:!0}}));T(e)}}),[]);const I=async()=>{if(i.length){y(!0);try{const e=await m()({path:`/wc/v3/products?include=${i.join(",")}&per_page=${i.length}`});e&&e.length&&A(e)}catch(e){console.error("Error fetching selected WooCommerce products:",e)}finally{y(!1)}}},U=async()=>{y(!0);try{const e=await m()({path:`/wc/v3/products?per_page=${d}`});e&&e.length&&A(e)}catch(e){console.error("Error fetching WooCommerce products:",e)}finally{y(!1)}},A=e=>{C(e);const a=e.map((e=>({id:e.id,title:e.name,price:W(e),description:O(e.short_description||e.description||""),imageUrl:e.images&&e.images.length>0?e.images[0].src:"",imageId:e.images&&e.images.length>0?e.images[0].id:0,imageAlt:e.images&&e.images.length>0?e.images[0].alt:""})));t({products:a,productIds:e.map((e=>e.id))}),T(e.map((e=>({id:e.id,name:e.name,selected:!0}))))},M=(e,a)=>{const c=[...$],l=c.findIndex((t=>t.id===e));if(l>=0){if(c[l].selected=!c[l].selected,!c[l].selected){const a=i.filter((t=>t!==e));t({productIds:a})}}else{c.push({id:e,name:a,selected:!0});const l=[...i,e];t({productIds:l})}if(T(c),!i.includes(e)){const a=[...i,e];t({productIds:a}),I()}},O=e=>(new DOMParser).parseFromString(e,"text/html").body.textContent||"",W=e=>{let t="";if(e.price_html){const a=document.createElement("div");a.innerHTML=e.price_html;const c=a.querySelector("ins .woocommerce-Price-amount"),l=a.querySelector(".woocommerce-Price-amount");t=c?c.textContent.trim():l?l.textContent.trim():e.price?`${e.currency_symbol||""}${e.price}`:""}else t=e.price?`${e.currency_symbol||""}${e.price}`:"";return t},j=(e,a,c)=>{const l=[...s];l[e]={...l[e],[a]:c},t({products:l})},D=(e,t)=>{j(e,"imageUrl",t.url),j(e,"imageId",t.id),j(e,"imageAlt",t.alt||"")},L=(0,o.useBlockProps)();return React.createElement(React.Fragment,null,React.createElement(o.InspectorControls,null,React.createElement(r.PanelBody,{title:(0,l.__)("Product Showcase Settings","block-development-examples")},React.createElement(r.TextControl,{label:(0,l.__)("Heading","block-development-examples"),value:a,onChange:e=>t({heading:e})}),React.createElement(r.TextareaControl,{label:(0,l.__)("Subheading","block-development-examples"),value:c,onChange:e=>t({subheading:e})}),React.createElement(r.SelectControl,{label:(0,l.__)("Display Mode","block-development-examples"),value:p,options:[{label:"Custom Products",value:"custom"},{label:"WooCommerce Products",value:"woo"}],onChange:e=>t({displayMode:e}),help:(0,l.__)("Select products source. WooCommerce mode requires the WooCommerce plugin.","block-development-examples")}),"woo"===p&&React.createElement("div",{className:"components-base-control woo-product-selector"},React.createElement("div",{className:"components-base-control__label"},(0,l.__)("Select WooCommerce Products","block-development-examples")),React.createElement("div",{className:"product-search"},React.createElement(r.TextControl,{label:(0,l.__)("Search Products","block-development-examples"),value:N,onChange:w,placeholder:(0,l.__)("Type product name","block-development-examples")}),React.createElement(r.Button,{variant:"secondary",onClick:async()=>{if(N.trim()){B(!0);try{const e=await m()({path:`/wc/v3/products?search=${encodeURIComponent(N)}&per_page=10`});if(e&&e.length){const t=e.map((e=>({id:e.id,name:e.name,image:e.images&&e.images.length>0?e.images[0].src:"",price:W(e),selected:i.includes(e.id)})));S(t)}else S([])}catch(e){console.error("Error searching WooCommerce products:",e),S([])}finally{B(!1)}}},isBusy:P,disabled:P||!N.trim()},(0,l.__)("Search","block-development-examples"))),P&&React.createElement(r.Spinner,null),f.length>0&&React.createElement("div",{className:"search-results"},React.createElement("h4",null,(0,l.__)("Search Results","block-development-examples")),React.createElement("ul",{className:"product-list"},f.map((e=>React.createElement("li",{key:`search-${e.id}`,className:"product-item"},React.createElement(r.CheckboxControl,{label:`${e.name} (${e.price})`,checked:e.selected||i.includes(e.id),onChange:()=>M(e.id,e.name)}),e.image&&React.createElement("img",{src:e.image,alt:e.name,className:"product-thumbnail"})))))),$.length>0&&React.createElement("div",{className:"selected-products"},React.createElement("div",{className:"selected-header"},React.createElement("h4",null,(0,l.__)("Selected Products","block-development-examples")),React.createElement(r.Button,{variant:"link",isDestructive:!0,onClick:()=>{T([]),t({productIds:[]}),setProducts([])}},(0,l.__)("Clear All","block-development-examples"))),React.createElement("ul",{className:"product-list"},$.filter((e=>e.selected)).map((e=>React.createElement("li",{key:`selected-${e.id}`,className:"product-item"},React.createElement("span",null,e.name),React.createElement(r.Button,{variant:"link",isDestructive:!0,onClick:()=>M(e.id,e.name)},(0,l.__)("Remove","block-development-examples"))))))),React.createElement(r.Button,{variant:"secondary",onClick:I,isBusy:x,disabled:x||!i.length,className:"mt-2"},x?(0,l.__)("Loading...","block-development-examples"):(0,l.__)("Refresh Selected Products","block-development-examples")),React.createElement(r.Button,{variant:"secondary",onClick:U,isBusy:x,disabled:x,className:"mt-2"},x?(0,l.__)("Loading...","block-development-examples"):(0,l.__)("Get Latest Products","block-development-examples"))),React.createElement(r.RangeControl,{label:(0,l.__)("Border Radius","block-development-examples"),value:h,onChange:e=>t({borderRadius:e}),min:0,max:50}),React.createElement(r.RangeControl,{label:(0,l.__)("Spacing","block-development-examples"),value:R,onChange:e=>t({spacing:e}),min:0,max:60}),React.createElement("div",{className:"color-picker-control"},React.createElement("p",null,(0,l.__)("Card Background Color","block-development-examples")),React.createElement(r.ColorPicker,{color:u,onChange:e=>t({cardBackgroundColor:e}),enableAlpha:!0})),React.createElement("div",{className:"color-picker-control"},React.createElement("p",null,(0,l.__)("Text Color","block-development-examples")),React.createElement(r.ColorPicker,{color:g,onChange:e=>t({textColor:e}),enableAlpha:!0})),React.createElement("div",{className:"color-picker-control"},React.createElement("p",null,(0,l.__)("Button Color","block-development-examples")),React.createElement(r.ColorPicker,{color:v,onChange:e=>t({buttonColor:e}),enableAlpha:!0})),React.createElement("div",{className:"color-picker-control"},React.createElement("p",null,(0,l.__)("Button Text Color","block-development-examples")),React.createElement(r.ColorPicker,{color:b,onChange:e=>t({buttonTextColor:e}),enableAlpha:!0}))),"custom"===p&&null!==E&&React.createElement(r.PanelBody,{title:(0,l.__)("Product Settings","block-development-examples")},React.createElement(r.TextControl,{label:(0,l.__)("Title","block-development-examples"),value:s[E].title,onChange:e=>j(E,"title",e)}),React.createElement(r.TextControl,{label:(0,l.__)("Price","block-development-examples"),value:s[E].price,onChange:e=>j(E,"price",e)}),React.createElement(r.TextareaControl,{label:(0,l.__)("Description","block-development-examples"),value:s[E].description,onChange:e=>j(E,"description",e)}),React.createElement("div",{className:"components-base-control"},React.createElement("label",{className:"components-base-control__label"},(0,l.__)("Image","block-development-examples")),React.createElement(o.MediaUploadCheck,null,React.createElement(o.MediaUpload,{onSelect:e=>D(E,e),allowedTypes:["image"],value:s[E].imageId,render:({open:e})=>React.createElement("div",null,s[E].imageUrl?React.createElement("div",null,React.createElement("img",{src:s[E].imageUrl,alt:s[E].imageAlt,style:{maxWidth:"100%",marginBottom:"8px"}}),React.createElement("div",{style:{display:"flex",gap:"8px"}},React.createElement(r.Button,{onClick:e,variant:"secondary"},(0,l.__)("Replace Image","block-development-examples")),React.createElement(r.Button,{onClick:()=>{return j(e=E,"imageUrl",""),j(e,"imageId",0),void j(e,"imageAlt","");var e},variant:"tertiary",isDestructive:!0},(0,l.__)("Remove Image","block-development-examples")))):React.createElement(r.Button,{onClick:e,variant:"primary",className:"editor-post-featured-image__toggle"},(0,l.__)("Select Image","block-development-examples")))}))))),React.createElement("div",L,React.createElement("div",{className:"product-showcase-header",style:{color:g}},React.createElement("h2",{className:"product-showcase-heading"},a),React.createElement("p",{className:"product-showcase-subheading"},c)),React.createElement("div",{className:"product-showcase-grid",style:{gap:`${R}px`}},s.map(((e,t)=>React.createElement("div",{key:`product-${t}`,className:"product-card "+(E===t?"is-selected":""),style:{backgroundColor:u,borderRadius:`${h}px`,color:g},onClick:()=>"custom"===p&&_(t)},React.createElement("div",{className:"product-image-container",style:{borderRadius:`${h}px`}},e.imageUrl?React.createElement("img",{src:e.imageUrl,alt:e.imageAlt,className:"product-image"}):"custom"===p?React.createElement("div",{className:"product-image-placeholder"},React.createElement(o.MediaUploadCheck,null,React.createElement(o.MediaUpload,{onSelect:e=>{_(t),D(t,e)},allowedTypes:["image"],render:({open:e})=>React.createElement(r.Button,{onClick:t=>{t.stopPropagation(),e()},className:"product-image-upload-button"},React.createElement("span",null,"+"))}))):React.createElement("div",{className:"product-image-placeholder"},React.createElement("span",null,"No image available"))),React.createElement("div",{className:"product-details"},React.createElement("h3",{className:"product-title"},e.title),"woo"===p?React.createElement("div",{className:"product-price",dangerouslySetInnerHTML:{__html:e.price}}):React.createElement("p",{className:"product-price"},e.price),React.createElement("p",{className:"product-description"},e.description),React.createElement("button",{className:"product-cart-button",style:{backgroundColor:v,color:b,borderRadius:`${Math.min(72,3*h)}px`},"data-product-id":e.id},(0,l.__)("Add to Cart","block-development-examples")))))))))},save:function({attributes:e}){const{heading:t,subheading:a,products:c,displayMode:l,cardBackgroundColor:r,textColor:n,buttonColor:s,buttonTextColor:m,borderRadius:i,spacing:d}=e,p=o.useBlockProps.save({className:"alignfull has-responsive-display"});return React.createElement("div",p,React.createElement("div",{className:"product-showcase-header",style:{color:n}},React.createElement("h2",{className:"product-showcase-heading"},t),React.createElement("p",{className:"product-showcase-subheading"},a)),React.createElement("div",{className:"product-showcase-grid",style:{gap:`${d}px`}},c.map(((e,t)=>React.createElement("div",{key:`product-${t}`,className:"product-card product-card-responsive",style:{backgroundColor:r,borderRadius:`${i}px`,color:n},"data-product-id":e.id},React.createElement("div",{className:"product-image-container",style:{borderRadius:`${i}px`}},e.imageUrl?React.createElement("img",{src:e.imageUrl,alt:e.imageAlt,className:"product-image",loading:"lazy"}):React.createElement("div",{className:"product-image-placeholder"},React.createElement("span",null,"No image available"))),React.createElement("div",{className:"product-details"},React.createElement("h3",{className:"product-title"},e.title),React.createElement("p",{className:"product-price"},e.price),React.createElement("p",{className:"product-description"},e.description),React.createElement("button",{className:"product-cart-button add_to_cart_button ajax_add_to_cart",style:{backgroundColor:s,color:m,borderRadius:`${Math.min(72,3*i)}px`},"data-product_id":e.id,"data-quantity":"1"},"Add to Cart")))))))}})}},a={};function c(e){var l=a[e];if(void 0!==l)return l.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,c),o.exports}c.m=t,e=[],c.O=(t,a,l,o)=>{if(!a){var r=1/0;for(i=0;i<e.length;i++){for(var[a,l,o]=e[i],n=!0,s=0;s<a.length;s++)(!1&o||r>=o)&&Object.keys(c.O).every((e=>c.O[e](a[s])))?a.splice(s--,1):(n=!1,o<r&&(r=o));if(n){e.splice(i--,1);var m=l();void 0!==m&&(t=m)}}return t}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[a,l,o]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={287:0,359:0};c.O.j=t=>0===e[t];var t=(t,a)=>{var l,o,[r,n,s]=a,m=0;if(r.some((t=>0!==e[t]))){for(l in n)c.o(n,l)&&(c.m[l]=n[l]);if(s)var i=s(c)}for(t&&t(a);m<r.length;m++)o=r[m],c.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return c.O(i)},a=globalThis.webpackChunkfilter_custom_blocks=globalThis.webpackChunkfilter_custom_blocks||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=c.O(void 0,[359],(()=>c(391)));l=c.O(l)})();